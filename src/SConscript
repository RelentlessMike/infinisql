Import('env')

isql_env = env.Clone()
isql_env.Append(LIBS=['tbb', 'lmdb', 'pthread', 'msgpack', 'zmq'])
isql_env.Append(CXXFLAGS='-g -O3 -finline-functions ')

lib_source = ['Field.cc', 'Serdes.cc', 'Lightning.cc', 'Catalog.cc', 
              'Metadata.cc', 'Schema.cc', 'Table.cc', 'Index.cc', 'User.cc',
              'Actor.cc', 'Message.cc', 'Mbox.cc', 'Topology.cc',
              'TopologyManager.cc']
          
server_source = ['main.cc']

lib = isql_env.Library('infinisql', lib_source)
isql_env.Prepend(LIBS=[lib])
isql_env.Program('infinisqld', server_source)
