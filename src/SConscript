env = Environment()
env.Append(LIBS=['infinisql', 'tbb', 'lmdb'])
env.Append(CXXFLAGS='-std=c++11 -ggdb -O3 -finline-functions '
                    '-Wall -Wno-deprecated -Wno-write-strings -mcx16')

lib_source = ['Field.cc', 'Serdes.cc', 'Lightning.cc', 'Catalog.cc', 
              'Metadata.cc', 'Schema.cc', 'Table.cc', 'Index.cc', 'User.cc']
          
server_source = ['main.cc']

Library('infinisql', lib_source)
Program('infinisqld', server_source)

conf = Configure(env)
if not conf.CheckLibWithHeader('lmdb', 'lmdb.h', 'c++'):
   print 'Did not find either lmdb library, header or both, exiting!'
   Exit(1)
env = conf.Finish()
